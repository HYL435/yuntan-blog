# ==============================================
# Nacos 核心配置 (Docker版 - 挂载模式)
# ==============================================

# 1. 基础配置
server.contextPath=/nacos
# server.port=8848
# server.servlet.contextPath=/nacos
# 必须设置为 mysql
spring.datasource.platform=mysql

# 2. 运行模式 (虽在 Env 指定，此处双重保险)
nacos.mode=standalone

# ==============================================
# 3. 数据库连接 (已修正)
# ==============================================
db.num=1
# ❌ 严禁使用 127.0.0.1
# ✅ 必须使用 mysql (对应 docker-compose 的 service name)
# ✅ 库名必须是 nacos_config (对应 MYSQL_DATABASE)
db.url.0=jdbc:mysql://mysql:3306/nacos_config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
db.user.0=root
db.password.0=766498

# ==============================================
# 4. 鉴权配置 (Nacos 2.x/3.x 必须配置 Base64 Key)
# ==============================================
# 开启鉴权
nacos.core.auth.enabled=true
# 必须设置 server.identity
nacos.core.auth.server.identity.key=nacos
nacos.core.auth.server.identity.value=nacos
# 必须设置 token.secret.key (且必须是 Base64 编码的长字符串，否则启动报错)
nacos.core.auth.plugin.nacos.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789

# ==============================================
# 5. 其他
# ==============================================
nacos.istio.mcp.server.enabled=false